!function(e){if("function"==typeof define&&define.amd)define(["leaflet"],e);else if("undefined"!=typeof module)module.exports=e(require("leaflet"));else{if(void 0===window.L)throw new Error("Leaflet must be loaded first");e(window.L)}}(function(n){n.Control.Fullscreen=n.Control.extend({options:{position:"topleft",title:{false:"View fullscreen",true:"Exit fullscreen"}},onAdd:function(e){var l=n.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=n.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",l),this.link.href="#",this.link.setAttribute("role","button"),this.icon=n.DomUtil.create("span","leaflet-control-fullscreen-icon",this.link),this._map=e,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),n.DomEvent.on(this.link,"click",this._click,this),l},_click:function(e){n.DomEvent.stopPropagation(e),n.DomEvent.preventDefault(e),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),n.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(e){var l=this.getContainer();this.isFullscreen()?e&&e.pseudoFullscreen?this._disablePseudoFullscreen(l):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(l):e&&e.pseudoFullscreen?this._enablePseudoFullscreen(l):l.requestFullscreen?l.requestFullscreen():l.mozRequestFullScreen?l.mozRequestFullScreen():l.webkitRequestFullscreen?l.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):l.msRequestFullscreen?l.msRequestFullscreen():this._enablePseudoFullscreen(l)},_enablePseudoFullscreen:function(e){n.DomUtil.addClass(e,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(e){n.DomUtil.removeClass(e,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(e){this._isFullscreen=e;var l=this.getContainer();e?n.DomUtil.addClass(l,"leaflet-fullscreen-on"):n.DomUtil.removeClass(l,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(e){var l=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;l!==this.getContainer()||this._isFullscreen?l!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}}),n.Map.mergeOptions({fullscreenControl:!1}),n.Map.addInitHook(function(){var e,l;this.options.fullscreenControl&&(this.fullscreenControl=new n.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl)),"onfullscreenchange"in document?e="fullscreenchange":"onmozfullscreenchange"in document?e="mozfullscreenchange":"onwebkitfullscreenchange"in document?e="webkitfullscreenchange":"onmsfullscreenchange"in document&&(e="MSFullscreenChange"),e&&(l=n.bind(this._onFullscreenChange,this),this.whenReady(function(){n.DomEvent.on(document,e,l)}),this.on("unload",function(){n.DomEvent.off(document,e,l)}))}),n.control.fullscreen=function(e){return new n.Control.Fullscreen(e)}});